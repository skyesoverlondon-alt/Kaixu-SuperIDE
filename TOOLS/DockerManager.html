<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>kAIxU ‚Äî Docker Manager</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet"/>
<style>
  :root{--bg0:#040008;--bg1:#0d001a;--bg2:#16002e;--bg3:#1e0040;--purple:#a243ff;--purple-hot:#d130ff;--gold:#ffd36a;--cyan:#30e0ff;--green:#4fffb0;--red:#ff4f6a;--orange:#ff9f43;--fg:#e8e0f0;}
  *{box-sizing:border-box;margin:0;padding:0;}
  body{background:var(--bg0);color:var(--fg);font-family:'Inter',sans-serif;font-size:13px;height:100vh;display:flex;flex-direction:column;overflow:hidden;}
  .hdr{display:flex;align-items:center;gap:12px;padding:8px 14px;background:var(--bg1);border-bottom:1px solid #2a0050;flex-shrink:0;}
  .hdr-title{font-weight:700;font-size:15px;color:var(--cyan);}
  .hdr-sub{color:#8060a0;font-size:11px;}
  .hdr-right{margin-left:auto;display:flex;gap:8px;align-items:center;}
  .btn{padding:5px 12px;border-radius:5px;border:none;cursor:pointer;font-family:inherit;font-size:12px;font-weight:600;transition:all .15s;}
  .btn-cyan{background:rgba(48,224,255,.12);color:var(--cyan);border:1px solid rgba(48,224,255,.3);}
  .btn-cyan:hover{background:rgba(48,224,255,.22);}
  .btn-green{background:rgba(79,255,176,.15);color:var(--green);border:1px solid rgba(79,255,176,.3);}
  .btn-green:hover{background:rgba(79,255,176,.25);}
  .btn-red{background:rgba(255,79,106,.12);color:var(--red);border:1px solid rgba(255,79,106,.3);}
  .btn-red:hover{background:rgba(255,79,106,.22);}
  .btn-purple{background:rgba(162,67,255,.15);color:var(--purple);border:1px solid rgba(162,67,255,.3);}
  .btn-purple:hover{background:rgba(162,67,255,.25);}
  .btn-gold{background:rgba(255,211,106,.12);color:var(--gold);border:1px solid rgba(255,211,106,.3);}
  .btn-gold:hover{background:rgba(255,211,106,.22);}
  .btn-sm{padding:3px 9px;font-size:11px;}

  .tabs{display:flex;background:var(--bg1);border-bottom:1px solid #1a0030;flex-shrink:0;}
  .tab{padding:8px 16px;font-size:12px;font-weight:600;cursor:pointer;border-bottom:2px solid transparent;color:#6040a0;transition:all .15s;}
  .tab:hover{color:var(--fg);}
  .tab.active{color:var(--cyan);border-bottom-color:var(--cyan);}
  .panel{display:none;flex:1;overflow:hidden;flex-direction:column;}
  .panel.active{display:flex;}

  /* CONTAINER TABLE */
  .toolbar{padding:8px 14px;background:var(--bg1);border-bottom:1px solid #1a0030;display:flex;gap:8px;align-items:center;flex-shrink:0;}
  .search-box{flex:1;background:var(--bg2);border:1px solid #3a0060;border-radius:4px;color:var(--fg);padding:6px 10px;font-family:inherit;font-size:12px;}
  .search-box:focus{outline:none;border-color:var(--cyan);}
  .tbl-wrap{flex:1;overflow-y:auto;}
  .tbl-wrap::-webkit-scrollbar{width:4px;}
  .tbl-wrap::-webkit-scrollbar-thumb{background:#3a0060;}
  table{width:100%;border-collapse:collapse;}
  th{font-size:10px;color:#6040a0;text-align:left;padding:7px 12px;border-bottom:1px solid #1a0030;text-transform:uppercase;letter-spacing:.05em;background:var(--bg1);position:sticky;top:0;z-index:1;}
  td{padding:8px 12px;border-bottom:1px solid #0d001a;font-size:12px;}
  tr.clickable{cursor:pointer;}
  tr.clickable:hover td{background:#0a0018;}
  .status-pill{padding:2px 7px;border-radius:3px;font-size:10px;font-weight:700;white-space:nowrap;}
  .pill-run{background:rgba(79,255,176,.12);color:var(--green);}
  .pill-stop{background:rgba(255,79,106,.1);color:var(--red);}
  .pill-pause{background:rgba(255,211,106,.1);color:var(--gold);}
  .pill-exit{background:rgba(128,96,160,.1);color:#8060a0;}
  .mono{font-family:'Share Tech Mono',monospace;}
  .cpu-bar,.mem-bar{height:5px;background:#1a0030;border-radius:3px;overflow:hidden;width:80px;display:inline-block;vertical-align:middle;margin-left:6px;}
  .cpu-fill{height:100%;border-radius:3px;background:var(--cyan);}
  .mem-fill{height:100%;border-radius:3px;background:var(--purple);}
  .action-cell{display:flex;gap:5px;white-space:nowrap;}
  .icon-btn{padding:3px 7px;border-radius:3px;border:none;cursor:pointer;font-size:11px;font-family:inherit;font-weight:600;}
  .ib-green{background:rgba(79,255,176,.1);color:var(--green);}
  .ib-green:hover{background:rgba(79,255,176,.2);}
  .ib-red{background:rgba(255,79,106,.1);color:var(--red);}
  .ib-red:hover{background:rgba(255,79,106,.2);}
  .ib-cyan{background:rgba(48,224,255,.1);color:var(--cyan);}
  .ib-cyan:hover{background:rgba(48,224,255,.2);}
  .ib-purple{background:rgba(162,67,255,.1);color:var(--purple);}
  .ib-purple:hover{background:rgba(162,67,255,.2);}

  /* LOG PANE */
  .log-strip{height:180px;background:var(--bg0);border-top:1px solid #1a0030;display:flex;flex-direction:column;flex-shrink:0;}
  .log-strip-hdr{padding:5px 12px;background:var(--bg1);border-bottom:1px solid #1a0030;display:flex;align-items:center;gap:8px;font-size:11px;}
  .log-container{font-family:'Share Tech Mono',monospace;font-size:11px;flex:1;overflow-y:auto;padding:6px 12px;line-height:1.5;}
  .log-container::-webkit-scrollbar{width:4px;}
  .log-container::-webkit-scrollbar-thumb{background:#3a0060;}
  .log-line{margin-bottom:1px;}
  .log-line.err{color:var(--red);}
  .log-line.warn{color:var(--gold);}
  .log-line.info{color:var(--cyan);}
  .log-line.dim{color:#5040a0;}

  /* IMAGES */
  .img-row{display:flex;align-items:center;gap:10px;padding:8px 12px;border-bottom:1px solid #0d001a;}
  .img-name{font-family:'Share Tech Mono',monospace;font-size:12px;color:var(--cyan);flex:1;}
  .img-tag{font-size:10px;color:#7050a0;}
  .img-size{font-size:11px;color:#6040a0;width:70px;text-align:right;}
  .img-created{font-size:10px;color:#5040a0;width:100px;text-align:right;}

  /* COMPOSE */
  .compose-card{margin:10px;background:var(--bg1);border-radius:6px;border:1px solid #2a0050;overflow:hidden;}
  .compose-hdr{padding:10px 14px;display:flex;align-items:center;gap:10px;}
  .compose-name{font-weight:700;font-size:13px;}
  .compose-services{padding:0 14px 10px;}
  .svc-row{display:flex;align-items:center;gap:8px;padding:5px 0;border-bottom:1px solid #0d001a;}
  .svc-row:last-child{border-bottom:none;}

  /* PULL MODAL */
  .inline-form{padding:10px 14px;background:var(--bg1);border-bottom:1px solid #1a0030;display:flex;gap:8px;}
  .inline-input{flex:1;background:var(--bg2);border:1px solid #3a0060;border-radius:4px;color:var(--fg);padding:6px 10px;font-family:'Share Tech Mono',monospace;font-size:12px;}
  .inline-input:focus{outline:none;border-color:var(--cyan);}

  .status-bar{padding:3px 14px;background:#060010;border-top:1px solid #1a0030;display:flex;gap:16px;font-size:10px;color:#5040a0;flex-shrink:0;}
  .status-bar span b{color:var(--fg);}
</style>
<script src="../assets/kaixu-nav.js" defer></script>
</head>
<body>

<div class="hdr">
  <div style="font-size:20px;">üê≥</div>
  <div>
    <div class="hdr-title">Docker Manager</div>
    <div class="hdr-sub">Containers ¬∑ Images ¬∑ Compose ‚Äî no Docker Desktop needed</div>
  </div>
  <div class="hdr-right">
    <span id="dockerStatus" style="font-size:11px;color:var(--green);">‚óè Engine connected</span>
    <button class="btn btn-cyan btn-sm" onclick="refreshAll()">‚Üª Refresh</button>
  </div>
</div>

<div class="tabs">
  <div class="tab active" onclick="switchTab('containers',this)">Containers</div>
  <div class="tab" onclick="switchTab('images',this)">Images</div>
  <div class="tab" onclick="switchTab('compose',this)">Compose</div>
  <div class="tab" onclick="switchTab('volumes',this)">Volumes</div>
</div>

<!-- CONTAINERS -->
<div class="panel active" id="panel-containers">
  <div class="toolbar">
    <input class="search-box" placeholder="Filter containers‚Ä¶" oninput="filterContainers(this.value)"/>
    <button class="btn btn-green btn-sm" onclick="startAll()">‚ñ∂ Start All</button>
    <button class="btn btn-red btn-sm" onclick="stopAll()">‚ñ† Stop All</button>
    <button class="btn btn-purple btn-sm" onclick="pruneContainers()">üóë Prune stopped</button>
    <select class="search-box" style="flex:0;width:130px;" id="stateFilter" onchange="filterContainers('')">
      <option value="all">All states</option>
      <option value="running">Running</option>
      <option value="stopped">Stopped</option>
      <option value="exited">Exited</option>
    </select>
  </div>
  <div class="tbl-wrap">
    <table>
      <thead><tr>
        <th>Name</th><th>Image</th><th>Status</th>
        <th>CPU</th><th>Memory</th><th>Ports</th><th>Actions</th>
      </tr></thead>
      <tbody id="containerTbody"></tbody>
    </table>
  </div>
  <div class="log-strip">
    <div class="log-strip-hdr">
      <span style="color:var(--cyan);font-weight:700;" id="logLabel">Logs ‚Äî select a container</span>
      <button class="btn btn-sm" style="background:#1a0030;color:#8060a0;margin-left:auto;" onclick="clearLog()">Clear</button>
    </div>
    <div class="log-container" id="logOutput">
      <div class="log-line dim">[kAIxU Docker] Click "üìã Logs" on a container to tail output here.</div>
    </div>
  </div>
</div>

<!-- IMAGES -->
<div class="panel" id="panel-images">
  <div class="inline-form">
    <input class="inline-input" id="pullInput" placeholder="Pull image: nginx:latest, node:20-alpine, postgres:16‚Ä¶"/>
    <button class="btn btn-cyan" onclick="pullImage()">‚¨á Pull</button>
    <button class="btn btn-red btn-sm" onclick="pruneDangling()">üóë Prune dangling</button>
  </div>
  <div class="tbl-wrap">
    <table>
      <thead><tr><th>Repository</th><th>Tag</th><th>Image ID</th><th>Size</th><th>Created</th><th>Actions</th></tr></thead>
      <tbody id="imageTbody"></tbody>
    </table>
  </div>
</div>

<!-- COMPOSE -->
<div class="panel" id="panel-compose" style="overflow-y:auto;">
  <div class="toolbar">
    <button class="btn btn-cyan btn-sm" onclick="loadCompose()">üìÇ Load docker-compose.yml</button>
  </div>
  <div id="composeArea"></div>
</div>

<!-- VOLUMES -->
<div class="panel" id="panel-volumes">
  <div class="toolbar">
    <button class="btn btn-red btn-sm" onclick="pruneVolumes()">üóë Prune unused</button>
  </div>
  <div class="tbl-wrap">
    <table>
      <thead><tr><th>Name</th><th>Driver</th><th>Mountpoint</th><th>Size</th><th>Actions</th></tr></thead>
      <tbody id="volumeTbody"></tbody>
    </table>
  </div>
</div>

<div class="status-bar">
  <span>Containers: <b id="sbTotal">0</b></span>
  <span>Running: <b id="sbRun" style="color:var(--green)">0</b></span>
  <span>Stopped: <b id="sbStop" style="color:var(--red)">0</b></span>
  <span>Images: <b id="sbImg">0</b></span>
  <span>Status: <b id="statusLabel">Idle</b></span>
</div>

<script>
let containers=[
  {id:'a1b2c3d4',name:'kaixu-worker',image:'cloudflare/wrangler:3',state:'running',cpu:12,mem:128,memMax:512,ports:'8787:8787',uptime:'2h 15m'},
  {id:'e5f6a7b8',name:'postgres-dev',image:'postgres:16',state:'running',cpu:4,mem:256,memMax:1024,ports:'5432:5432',uptime:'5d 3h'},
  {id:'c9d0e1f2',name:'redis-cache',image:'redis:7-alpine',state:'running',cpu:1,mem:32,memMax:256,ports:'6379:6379',uptime:'5d 3h'},
  {id:'a3b4c5d6',name:'nginx-proxy',image:'nginx:1.25-alpine',state:'running',cpu:2,mem:18,memMax:128,ports:'80:80, 443:443',uptime:'5d 3h'},
  {id:'e7f8a9b0',name:'mailhog',image:'mailhog/mailhog:latest',state:'stopped',cpu:0,mem:0,memMax:128,ports:'1025:1025',uptime:'‚Äî'},
  {id:'c1d2e3f4',name:'adminer',image:'adminer:4',state:'exited',cpu:0,mem:0,memMax:128,ports:'8080:8080',uptime:'‚Äî'},
];

const IMAGES=[
  {repo:'postgres',tag:'16',id:'sha256:a1b2c3',size:'379 MB',created:'3 weeks ago'},
  {repo:'redis',tag:'7-alpine',id:'sha256:d4e5f6',size:'29 MB',created:'3 weeks ago'},
  {repo:'nginx',tag:'1.25-alpine',id:'sha256:g7h8i9',size:'41 MB',created:'1 month ago'},
  {repo:'node',tag:'20-alpine',id:'sha256:j0k1l2',size:'172 MB',created:'2 weeks ago'},
  {repo:'mailhog/mailhog',tag:'latest',id:'sha256:m3n4o5',size:'68 MB',created:'6 months ago'},
  {repo:'adminer',tag:'4',id:'sha256:p6q7r8',size:'87 MB',created:'2 months ago'},
  {repo:'cloudflare/wrangler',tag:'3',id:'sha256:s9t0u1',size:'334 MB',created:'1 week ago'},
];

const VOLUMES=[
  {name:'postgres-data',driver:'local',mountpoint:'/var/lib/docker/volumes/postgres-data/_data',size:'124 MB'},
  {name:'redis-data',driver:'local',mountpoint:'/var/lib/docker/volumes/redis-data/_data',size:'2.1 MB'},
  {name:'uploads',driver:'local',mountpoint:'/var/lib/docker/volumes/uploads/_data',size:'48 MB'},
  {name:'<none>',driver:'local',mountpoint:'/var/lib/docker/volumes/abc123/_data',size:'0 B'},
];

const COMPOSE_DEMO={
  file:'docker-compose.yml',
  services:[
    {name:'web',image:'node:20-alpine',state:'running',ports:'3000:3000'},
    {name:'db',image:'postgres:16',state:'running',ports:'5432:5432'},
    {name:'cache',image:'redis:7-alpine',state:'running',ports:'6379:6379'},
    {name:'proxy',image:'nginx:1.25-alpine',state:'running',ports:'80:80'},
  ]
};

const LOG_LINES={
  'kaixu-worker':['[wrangler] ‚ñ≤ Ready on http://0.0.0.0:8787','[wrangler] GET /health 200 OK 4ms','[wrangler] POST /v1/chat 200 OK 312ms','[wrangler] POST /v1/stream 200 OK 1240ms'],
  'postgres-dev':['LOG:  database system is ready to accept connections','LOG:  checkpoint complete','LOG:  autovacuum: processing database "kaixu"'],
  'redis-cache':['* Ready to accept connections','* Background saving started','* Background saving terminated with success'],
  'nginx-proxy':['[notice] 1#1: nginx/1.25.4','172.17.0.1 - GET / 200','172.17.0.1 - GET /health 200'],
};

function init(){ renderContainers(); renderImages(); renderCompose(); renderVolumes(); updateSB(); }

function filterContainers(q){
  const f=document.getElementById('stateFilter').value;
  const filtered=containers.filter(c=>{
    const matchQ=!q||c.name.includes(q)||c.image.includes(q);
    const matchF=f==='all'||c.state===f||(f==='stopped'&&(c.state==='stopped'||c.state==='exited'));
    return matchQ&&matchF;
  });
  renderContainers(filtered);
}

function renderContainers(list){
  list=list||containers;
  const tb=document.getElementById('containerTbody');
  tb.innerHTML=list.map(c=>{
    const stateClass={running:'pill-run',stopped:'pill-stop',exited:'pill-exit',paused:'pill-pause'}[c.state]||'pill-exit';
    return `<tr class="clickable">
      <td class="mono" style="color:var(--cyan);">${c.name}</td>
      <td class="mono" style="font-size:11px;color:#8060a0;">${c.image}</td>
      <td><span class="status-pill ${stateClass}">${c.state}</span></td>
      <td>${c.state==='running'?`<span style="font-size:11px;">${c.cpu}%</span><span class="cpu-bar"><span class="cpu-fill" style="width:${c.cpu}%;"></span></span>`:'‚Äî'}</td>
      <td>${c.state==='running'?`<span style="font-size:11px;">${c.mem}MB</span><span class="mem-bar"><span class="mem-fill" style="width:${Math.round(c.mem/c.memMax*100)}%;"></span></span>`:'‚Äî'}</td>
      <td class="mono" style="font-size:10px;color:#7050a0;">${c.ports}</td>
      <td><div class="action-cell">
        ${c.state==='running'
          ?`<button class="icon-btn ib-red" onclick="stopContainer('${c.id}')">‚ñ† Stop</button>
            <button class="icon-btn ib-purple" onclick="restartContainer('${c.id}')">‚Ü∫ Restart</button>
            <button class="icon-btn ib-cyan" onclick="tailLogs('${c.id}','${c.name}')">üìã Logs</button>
            <button class="icon-btn ib-green" onclick="openShell('${c.name}')">‚å® Shell</button>`
          :`<button class="icon-btn ib-green" onclick="startContainer('${c.id}')">‚ñ∂ Start</button>
            <button class="icon-btn ib-red" onclick="removeContainer('${c.id}')">‚úï Remove</button>`}
      </div></td>
    </tr>`;
  }).join('');
}

function startContainer(id){
  const c=containers.find(x=>x.id===id); if(!c) return;
  c.state='running'; c.cpu=Math.floor(Math.random()*15)+1; c.mem=Math.floor(Math.random()*200)+64; c.uptime='0m';
  renderContainers(); updateSB(); setStatus(`Started ${c.name}`);
}
function stopContainer(id){
  const c=containers.find(x=>x.id===id); if(!c) return;
  c.state='stopped'; c.cpu=0; c.mem=0; c.uptime='‚Äî';
  renderContainers(); updateSB(); setStatus(`Stopped ${c.name}`);
}
function restartContainer(id){
  stopContainer(id); setTimeout(()=>{ startContainer(id); setStatus(`Restarted ${containers.find(x=>x.id===id)?.name}`); },400);
}
function removeContainer(id){
  const c=containers.find(x=>x.id===id); const name=c?.name;
  containers=containers.filter(x=>x.id!==id);
  renderContainers(); updateSB(); setStatus(`Removed ${name}`);
}
function startAll(){ containers.filter(c=>c.state!=='running').forEach(c=>startContainer(c.id)); setStatus('Started all containers'); }
function stopAll(){ containers.filter(c=>c.state==='running').forEach(c=>stopContainer(c.id)); setStatus('Stopped all containers'); }
function pruneContainers(){ containers=containers.filter(c=>c.state!=='exited'); renderContainers(); updateSB(); setStatus('Pruned stopped containers'); }

function tailLogs(id,name){
  const lines=LOG_LINES[name]||[`[${name}] container logs not available in demo`];
  const out=document.getElementById('logOutput');
  document.getElementById('logLabel').textContent=`Logs ‚Äî ${name}`;
  out.innerHTML='';
  lines.forEach((l,i)=>setTimeout(()=>{
    const d=document.createElement('div');
    d.className='log-line '+(l.includes('ERR')||l.includes('error')?'err':l.includes('WARN')?'warn':l.includes('[wrangler]')||l.includes('[notice]')?'info':'dim');
    d.textContent=`[${new Date().toISOString().slice(11,19)}] ${l}`;
    out.appendChild(d); out.scrollTop=out.scrollHeight;
  },i*120));
  setStatus(`Tailing ${name}‚Ä¶`);
}

function clearLog(){ document.getElementById('logOutput').innerHTML='<div class="log-line dim">Log cleared.</div>'; }
function openShell(name){ setStatus(`Shell: docker exec -it ${name} /bin/sh`); logLine(`$ docker exec -it ${name} /bin/sh`,'info'); }

function renderImages(){
  document.getElementById('imageTbody').innerHTML=IMAGES.map(img=>`<tr>
    <td class="mono" style="color:var(--cyan);">${img.repo}</td>
    <td class="mono" style="color:var(--gold);">${img.tag}</td>
    <td class="mono" style="font-size:10px;color:#6040a0;">${img.id.slice(0,19)}‚Ä¶</td>
    <td style="color:#8060a0;">${img.size}</td>
    <td style="color:#6040a0;">${img.created}</td>
    <td><div class="action-cell">
      <button class="icon-btn ib-green" onclick="runImage('${img.repo}:${img.tag}')">‚ñ∂ Run</button>
      <button class="icon-btn ib-red" onclick="removeImage('${img.repo}:${img.tag}')">‚úï Remove</button>
    </div></td>
  </tr>`).join('');
  document.getElementById('sbImg').textContent=IMAGES.length;
}

function pullImage(){
  const name=document.getElementById('pullInput').value.trim();
  if(!name){ setStatus('Enter an image name'); return; }
  logLine(`$ docker pull ${name}`,'info');
  setStatus(`Pulling ${name}‚Ä¶`);
  setTimeout(()=>{ logLine(`  ‚úì Pulled ${name}`,'dim'); setStatus(`Pulled ${name}`); },1200);
}
function pruneDangling(){ setStatus('Pruned dangling images'); }
function runImage(img){ setStatus(`Running: docker run -d ${img}`); logLine(`$ docker run -d ${img}`,'info'); }
function removeImage(img){ setStatus(`Removed image: ${img}`); }

function renderCompose(){
  document.getElementById('composeArea').innerHTML=`
    <div class="compose-card">
      <div class="compose-hdr">
        <span class="mono" style="color:var(--cyan);">docker-compose.yml</span>
        <div style="margin-left:auto;display:flex;gap:6px;">
          <button class="btn btn-green btn-sm" onclick="composeUp()">‚ñ≤ Up</button>
          <button class="btn btn-red btn-sm" onclick="composeDown()">‚ñº Down</button>
          <button class="btn btn-cyan btn-sm" onclick="composePs()">‚Ñπ Status</button>
        </div>
      </div>
      <div class="compose-services">
        ${COMPOSE_DEMO.services.map(s=>`
          <div class="svc-row">
            <span class="status-dot active" style="flex-shrink:0;"></span>
            <span class="mono" style="color:var(--fg);min-width:90px;">${s.name}</span>
            <span class="mono" style="color:#7050a0;font-size:11px;flex:1;">${s.image}</span>
            <span class="mono" style="color:var(--gold);font-size:10px;">${s.ports}</span>
          </div>`).join('')}
      </div>
    </div>`;
}
function loadCompose(){ setStatus('Loaded docker-compose.yml (demo)'); renderCompose(); }
function composeUp(){ setStatus('docker compose up -d ‚Äî all services starting‚Ä¶'); }
function composeDown(){ setStatus('docker compose down ‚Äî stopping all services‚Ä¶'); }
function composePs(){ setStatus('All compose services running'); }

function renderVolumes(){
  document.getElementById('volumeTbody').innerHTML=VOLUMES.map(v=>`<tr>
    <td class="mono" style="color:var(--cyan);">${v.name}</td>
    <td style="color:#7050a0;">${v.driver}</td>
    <td class="mono" style="font-size:10px;color:#6040a0;">${v.mountpoint}</td>
    <td style="color:#8060a0;">${v.size}</td>
    <td><div class="action-cell">
      <button class="icon-btn ib-red" onclick="removeVolume('${v.name}')">‚úï Remove</button>
    </div></td>
  </tr>`).join('');
}
function removeVolume(name){ setStatus(`Removed volume: ${name}`); }
function pruneVolumes(){ setStatus('Pruned unused volumes'); }

function switchTab(name,el){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  el.classList.add('active');
  document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
  document.getElementById(`panel-${name}`).classList.add('active');
}

function refreshAll(){ init(); setStatus('Refreshed'); }
function updateSB(){
  document.getElementById('sbTotal').textContent=containers.length;
  document.getElementById('sbRun').textContent=containers.filter(c=>c.state==='running').length;
  document.getElementById('sbStop').textContent=containers.filter(c=>c.state!=='running').length;
}
function logLine(msg,cls){
  const out=document.getElementById('logOutput');
  const d=document.createElement('div'); d.className=`log-line ${cls}`; d.textContent=msg;
  out.appendChild(d); out.scrollTop=out.scrollHeight;
}
function setStatus(msg){ document.getElementById('statusLabel').textContent=msg; }

init();
</script>
</body>
</html>
